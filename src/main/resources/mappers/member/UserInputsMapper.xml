<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.assistant.acc.mapper.member.UserInputsMapper">

    <resultMap id="UserInputMap" type="com.assistant.acc.domain.member.UserInputs">
        <id property="userInputNo" column="user_input_no"/>
        <result property="pNo" column="p_no"/>
        <result property="theme" column="theme"/>
        <result property="keywords" column="keywords"/>
        <result property="pName" column="p_name"/>
        <result property="createAt" column="create_at"/>
    </resultMap>

    <!-- INSERT -->
    <insert id="UserInputInsert" useGeneratedKeys="true" keyProperty="userInputNo">
        INSERT INTO user_input (p_no, theme, keywords, p_name, create_at)
        VALUES (#{pNo}, #{theme}, #{keywords}, #{pName}, NOW())
    </insert>

    <!-- SELECT -->
    <select id="UserInputSelect" resultMap="UserInputMap">
        SELECT * FROM user_input WHERE user_input_no = #{userInputNo}
    </select>

    <select id="UserInputSelectsByProject" resultMap="UserInputMap">
        SELECT * FROM user_input WHERE p_no = #{pNo} ORDER BY create_at DESC
    </select>

    <!-- p_no 최신값 1건 가져오기 -->
    <select id="UserInputSelectLatest" resultMap="UserInputMap">
        SELECT *
        FROM user_input
        WHERE p_no = #{pNo}
        ORDER BY create_at DESC
        LIMIT 1
    </select>

    <!-- UPDATE -->
    <update id="UserInputUpdate">
        UPDATE user_input
        SET theme = #{theme},
        keywords = #{keywords},
        p_name = #{pName}
        WHERE user_input_no = #{userInputNo}
    </update>

    <!-- DELETE -->
    <delete id="UserInputDelete">
        DELETE FROM user_input WHERE user_input_no = #{userInputNo}
    </delete>

</mapper>
